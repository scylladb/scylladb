

<!DOCTYPE html>
<html class="no-js" lang="en" style="visibility: hidden;">
    
    

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width initial-scale=1" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>
             ScyllaDB CQL Extensions | ScyllaDB Docs 
        </title>
        <meta name="description" content="ScyllaDB is an Apache Cassandra-compatible NoSQL data store that can handle 1 million transactions per second on a single server." />
        <link rel="icon" href="../_static/img/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="../_static/img/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" href="../_static/img/favicon-228x228.png" sizes="192x192" />
        <link rel="apple-touch-icon" href="../_static/img/favicon-228x228.png" />
        <meta name="msapplication-TileImage" href="../_static/img/favicon-228x228.png" />

        
            
            
        

        
            
            <link rel="canonical" href="https://opensource.docs.scylladb.com/stable/cql/cql-extensions.html"/>
        

        <link rel="author" href="mailto:info@scylladb.com" />

        
            
        <!-- increase expertrec loading priority-->
        <link rel="dns-prefetch" href="https://cse.expertrec.com">

        <!-- increase font loading priority -->
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="preload" as="style"
              href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- async CSS -->
        <link rel="stylesheet" media="print" onload="this.onload=null;this.removeAttribute('media');"
              href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- no-JS fallback -->
        <noscript>
            <link rel="stylesheet"
                  href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />
        </noscript>

        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/biel-search@latest/dist/biel-search/biel-search.css">
        <script type="module" src="https://cdn.jsdelivr.net/npm/biel-search@latest/dist/biel-search/biel-search.esm.js"></script>
        
        
        
            
                <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../_static/css/main.css?v=e3ce25dc" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../_static/sphinx_collapse.css?v=226d88b4" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=5a6d8084" />
            
        
    
        
        
    
    
    <meta name="robots" content="noindex">
    
    
            
        <script type="text/javascript" src="../_static/js/runtime.bundle.js"></script>
        <script type="text/javascript" src="../_static/js/main.bundle.js"></script>
        
            
                <script src="../_static/documentation_options.js?v=5929fcd5"></script>
            
        
            
                <script src="../_static/doctools.js?v=9a2dae69"></script>
            
        
            
                <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
            
        
            
                <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
            
        
            
                <script src="../_static/copybutton.js?v=f281be69"></script>
            
        
    
            
                <!-- Local meta tags -->
            
            
                <!-- Google Tag Manager docs -->
<script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            "gtm.start": new Date().getTime(),
            event: "gtm.js"
        });
        var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s),
            dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-54NWVS4");
</script>
<!-- End Google Tag Manager -->

<!-- Google Tag Manager global -->
<script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            "gtm.start": new Date().getTime(),
            event: "gtm.js"
        });
        var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s),
            dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-T8P2JP");
</script>
<!-- End Google Tag Manager -->

<!-- Expertrec -->
<script>
    var id = "e2077224-9ccf-11e9-a0c9-0242ac130002";
    var ci_search = document.createElement("script");
    ci_search.type = "text/javascript";
    ci_search.async = true;
    ci_search.src = "https://cse.expertrec.com/api/js/ci_common.js?id=" + id;
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(ci_search, s);
</script>
<!-- End Expertrec -->
            
        

    </head>

    <body class="brand-open-source">
        <section class="promo-banner  promo-banner--hide" style="display: none;">
    <div class="promo-banner-wrapper">
        
        <div class="promo-banner__title">ScyllaDB University LIVE, FREE Virtual Training Event | March 21</div>
        <a class="promo-banner__button button button--reverse" href="https://lp.scylladb.com/university-live-2023-03-registration?siteplacement=docs"
           target="_blank" rel="noopener noreferrer">Register for Free</a>
        <button class="promo-banner__close">
            <i class="icon-cancel"></i>
        </button>
    </div>
</section>
        <header class="header">
    <div class="header-logo">
        <a class="header-logo__img" href="https://scylladb.com/">
            <img src="../_static/img/scylladb-logo-horizontal.svg" alt="ScyllaDB Documentation Logo" />
        </a>
        <span class="header-logo__bar"></span>
        <a class="header-logo__text" href="https://docs.scylladb.com/">
            Documentation
        </a>
    </div>
    <div class="header-navigation">
        <ul class="dropdown menu scylla-dropdown scylla-dropdown--header" data-dropdown-menu>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Deployments <i class="chevron icon-arrow-dropdown"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/scylla-cloud/">
                            <i class="icon-docs-cloud"></i>Cloud</a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/manual/">
                            <i class="icon-server"></i>Server</a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Tools <i class="chevron icon-arrow-dropdown"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://manager.docs.scylladb.com/">
                            <i class="icon-docs-manager"></i>ScyllaDB Manager</a>
                    </li>
                    <li>
                        <a href="https://monitoring.docs.scylladb.com/">
                            <i class="icon-docs-monitoring"></i>ScyllaDB
                            Monitoring Stack</a>
                    </li>
                    <li>
                        <a href="https://operator.docs.scylladb.com/">
                            <i class="icon-docs-operator"></i>ScyllaDB Operator
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Drivers <i class="chevron icon-arrow-dropdown"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/manual/stable/using-scylla/drivers/cql-drivers/">
                            <i class="icon-docs-nsql-guides"></i>CQL Drivers
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/manual/stable/using-scylla/drivers/dynamo-drivers/">
                            <i class="icon-docs-alternator"></i>DynamoDB Drivers
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Resources
                    <i class="chevron icon-arrow-dropdown"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://university.scylladb.com">
                            <i class="icon-university"></i>
                            ScyllaDB University
                        </a>
                    </li>
                    <li>
                        <a href="https://forum.scylladb.com">
                            <i class="icon-docs-community"></i>
                            Community Forum
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/stable/get-started/develop-with-scylladb/tutorials-example-projects.html">
                            <i class="icon-docs-training"></i>
                            Tutorials
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
        <div class="header-button">
            <a href="https://docs.scylladb.com/manual/stable/getting-started/installation-common/scylla-web-installer.html" class="button"><i class="icon-download me-2"></i> Install</a>
        </div>
    </div>
    <div class="header-search-box">
        <i class="dark-theme-toggler icon-theme"></i>
        <div class="search-box">
            <ci-search></ci-search>
        </div>
        
            <biel-button class="header-ask-ai" project="ddfdo8m94k" 
                header-title="ScyllaDB chatbot (beta)"
                button-position="default"
                modal-position="bottom-right"
                button-style="dark">
                Ask AI
            </biel-button>
        
    </div>
    <div class="side-nav-toggle">
    <i class="dark-theme-toggler icon-theme"></i>
    <div class="side-nav-toggle__button" data-toggle="side-nav">
        <i class="icon-menu"></i>
    </div>
</div>
</header>
        <div class="title"></div>
        <section
            class="layout  layout--sidebar layout--has-secondary-sidebar ">
            <div class="content large-order-2">
                
                    <div class="pre-content">
                        <div class="breadcrumbs">
    <span class="bread__item">
        <a href="https://docs.scylladb.com"
           class="bread__highlight">
            <i class="icon-home"></i> ScyllaDB Docs
        </a>
    </span>
    <span class="bread__item">
        <a href="../index.html"
           class="bread__highlight">
            ScyllaDB Open Source
        </a>
    </span>
    
        <span class="bread__item">
            <a href="index.html" class="bread__highlight">
                CQL Reference
            </a>
        </span>
    
    <span class="bread__item bread__item--last">ScyllaDB CQL Extensions</span>
</div>
                    </div>
                
                
                <div class="sidebar-right-layout">
                    <div class="body-container">
                

                    <div class="content-body">
                        
                            
<div class="admonition caution">
    <p class="admonition-title">Caution</p>
    <p>
        You're viewing documentation for a previous version.
        <a href="https://docs.scylladb.com/manual/">Switch to the latest stable version.</a>
    </p>
</div>

                        
                        
                        <section id="scylladb-cql-extensions">
<h1>ScyllaDB CQL Extensions<a class="headerlink" href="#scylladb-cql-extensions" title="Link to this heading">¶</a></h1>
<p>ScyllaDB extends the CQL language to provide a few extra features. This document
lists those extensions.</p>
<section id="bypass-cache-clause">
<h2>BYPASS CACHE clause<a class="headerlink" href="#bypass-cache-clause" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">BYPASS</span> <span class="pre">CACHE</span></code> clause on <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> statements informs the database that the data
being read is unlikely to be read again in the near future, and also
was unlikely to have been read in the near past; therefore no attempt
should be made to read it from the cache or to populate the cache with
the data. This is mostly useful for range scans; these typically
process large amounts of data with no temporal locality and do not
benefit from the cache.</p>
<p>The clause is placed immediately after the optional <code class="docutils literal notranslate"><span class="pre">ALLOW</span> <span class="pre">FILTERING</span></code>
clause:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">...</span> <span class="n">FROM</span> <span class="o">...</span>
<span class="n">WHERE</span> <span class="o">...</span>
<span class="n">ALLOW</span> <span class="n">FILTERING</span>          <span class="o">--</span> <span class="n">optional</span>
<span class="n">BYPASS</span> <span class="n">CACHE</span>
</pre></div>
</div>
</section>
<section id="paxos-grace-seconds-per-table-option">
<h2>“Paxos grace seconds” per-table option<a class="headerlink" href="#paxos-grace-seconds-per-table-option" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">paxos_grace_seconds</span></code> option is used to set the amount of seconds which
are used to TTL data in paxos tables when using LWT queries against the base
table.</p>
<p>This value is intentionally decoupled from <code class="docutils literal notranslate"><span class="pre">gc_grace_seconds</span></code> since,
in general, the base table could use completely different strategy to garbage
collect entries, e.g. can set <code class="docutils literal notranslate"><span class="pre">gc_grace_seconds</span></code> to 0 if it doesn’t use
deletions and hence doesn’t need to repair.</p>
<p>However, paxos tables still rely on repair to achieve consistency, and
the user is required to execute repair within <code class="docutils literal notranslate"><span class="pre">paxos_grace_seconds</span></code>.</p>
<p>Default value is equal to <code class="docutils literal notranslate"><span class="pre">DEFAULT_GC_GRACE_SECONDS</span></code>, which is 10 days.</p>
<p>The option can be specified at <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> or <code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">TABLE</span></code> queries in the same
way as other options by using <code class="docutils literal notranslate"><span class="pre">WITH</span></code> clause:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">tbl</span> <span class="o">...</span>
<span class="n">WITH</span> <span class="n">paxos_grace_seconds</span><span class="o">=</span><span class="mi">1234</span>
</pre></div>
</div>
</section>
<section id="using-timeout">
<h2>USING TIMEOUT<a class="headerlink" href="#using-timeout" title="Link to this heading">¶</a></h2>
<p>TIMEOUT extension allows specifying per-query timeouts. This parameter accepts a single
duration and applies it as a timeout specific to a single particular query.
The parameter is supported for prepared statements as well.
The parameter acts as part of the USING clause, and thus can be combined with other
parameters - like timestamps and time-to-live.
For example, one can use <code class="docutils literal notranslate"><span class="pre">USING</span> <span class="pre">TIMEOUT</span> <span class="pre">...</span> <span class="pre">and</span> <span class="pre">TTL</span> <span class="pre">...</span></code> to specify both a non-default timeout and a ttl.</p>
<p>Examples:</p>
<div class="highlight-cql notranslate"><div class="highlight"><pre><span></span>	<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">t</span> <span class="k">USING</span> <span class="n">TIMEOUT</span> <span class="mf">200</span><span class="n">ms</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-cql notranslate"><div class="highlight"><pre><span></span>	<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">t</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="mf">2</span><span class="p">,</span><span class="mf">3</span><span class="p">)</span> <span class="k">USING</span> <span class="nb">TIMESTAMP</span> <span class="mf">42</span> <span class="k">AND</span> <span class="n">TIMEOUT</span> <span class="mf">50</span><span class="n">ms</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-cql notranslate"><div class="highlight"><pre><span></span>	<span class="k">TRUNCATE</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="k">USING</span> <span class="n">TIMEOUT</span> <span class="mf">5</span><span class="n">m</span><span class="p">;</span>
</pre></div>
</div>
<p>Working with prepared statements works as usual - the timeout parameter can be
explicitly defined or provided as a marker:</p>
<div class="highlight-cql notranslate"><div class="highlight"><pre><span></span>	<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">t</span> <span class="k">USING</span> <span class="n">TIMEOUT</span> <span class="o">?</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-cql notranslate"><div class="highlight"><pre><span></span>	<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">t</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="o">?</span><span class="p">,</span><span class="o">?</span><span class="p">,</span><span class="o">?</span><span class="p">)</span> <span class="k">USING</span> <span class="nb">TIMESTAMP</span> <span class="mf">42</span> <span class="k">AND</span> <span class="n">TIMEOUT</span> <span class="mf">50</span><span class="n">ms</span><span class="p">;</span>
</pre></div>
</div>
<p>The timeout parameter can be applied to the following data modification queries:
INSERT, UPDATE, DELETE, PRUNE MATERIALIZED VIEW, BATCH,
and to the TRUNCATE data definition query.</p>
<p>In addition, the timeout parameter can be applied to SELECT queries as well.</p>
</section>
<section id="keyspace-storage-options">
<span id="id1"></span><h2>Keyspace storage options<a class="headerlink" href="#keyspace-storage-options" title="Link to this heading">¶</a></h2>
<!---
This section must be moved to Data Definition> CREATE KEYSPACE
when support for object storage is GA.
 ---><p>By default, SStables of a keyspace are stored in a local directory.
As an alternative, you can configure your keyspace to be stored
on Amazon S3 or another S3-compatible object store.</p>
<p>Support for object storage is experimental and must be explicitly
enabled in the <code class="docutils literal notranslate"><span class="pre">scylla.yaml</span></code> configuration file by specifying
the <code class="docutils literal notranslate"><span class="pre">keyspace-storage-options</span></code> option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">experimental_features</span><span class="p">:</span>
     <span class="o">-</span> <span class="n">keyspace</span><span class="o">-</span><span class="n">storage</span><span class="o">-</span><span class="n">options</span>
</pre></div>
</div>
<p>With support for object storage enabled, add your endpoint configuration
to <code class="docutils literal notranslate"><span class="pre">scylla.yaml</span></code>:</p>
<ol>
<li><p>Create an <code class="docutils literal notranslate"><span class="pre">object-storage-config-file.yaml</span></code> file with a description of
allowed endpoints, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  endpoints:
    - name: $endpoint_address_or_domain_name
      port: $port_number
      https: optional True or False
      aws_region: optional region name, e.g. us-east-1
      aws_access_key_id: optional AWS access key ID
      aws_secret_access_key: optional AWS secret access key
      aws_session_token: optional AWS session token
</pre></div>
</div>
</li>
<li><p>Specify the <code class="docutils literal notranslate"><span class="pre">object-storage-config-file</span></code> option in your <code class="docutils literal notranslate"><span class="pre">scylla.yaml</span></code>,
providing <code class="docutils literal notranslate"><span class="pre">object-storage-config-file.yaml</span></code> as the value:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">object</span><span class="o">-</span><span class="n">storage</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">file</span><span class="p">:</span> <span class="nb">object</span><span class="o">-</span><span class="n">storage</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">file</span><span class="o">.</span><span class="n">yaml</span>
</pre></div>
</div>
</li>
</ol>
<p>Now you can configure your object storage when creating a keyspace:</p>
<div class="highlight-cql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">KEYSPACE</span> <span class="k">with</span> <span class="k">STORAGE</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;S3&#39;</span><span class="p">,</span> <span class="s1">&#39;endpoint&#39;</span><span class="p">:</span> <span class="s1">&#39;$endpoint_name&#39;</span><span class="p">,</span> <span class="s1">&#39;bucket&#39;</span><span class="p">:</span> <span class="s1">&#39;$bucket&#39;</span> <span class="p">}</span> 
</pre></div>
</div>
<p><strong>Example</strong></p>
<div class="highlight-cql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">KEYSPACE</span> <span class="n">ks</span>
    <span class="k">WITH</span> <span class="n">REPLICATION</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;class&#39;</span> <span class="p">:</span> <span class="s1">&#39;NetworkTopologyStrategy&#39;</span><span class="p">,</span> <span class="s1">&#39;replication_factor&#39;</span> <span class="p">:</span> <span class="mf">3</span> <span class="p">}</span>
    <span class="k">AND</span> <span class="k">STORAGE</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;type&#39;</span> <span class="p">:</span> <span class="s1">&#39;S3&#39;</span><span class="p">,</span> <span class="s1">&#39;bucket&#39;</span> <span class="p">:</span> <span class="s1">&#39;/tmp/b1&#39;</span><span class="p">,</span> <span class="s1">&#39;endpoint&#39;</span> <span class="p">:</span> <span class="s1">&#39;localhost&#39;</span> <span class="p">}</span> <span class="p">;</span>
</pre></div>
</div>
<p>Storage options can be inspected by checking the new system schema table: <code class="docutils literal notranslate"><span class="pre">system_schema.scylla_keyspaces</span></code>:</p>
<div class="highlight-cql notranslate"><div class="highlight"><pre><span></span>    <span class="n">cassandra</span><span class="o">@</span><span class="n">cqlsh</span><span class="o">&gt;</span> <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">system_schema</span><span class="mf">.</span><span class="n">scylla_keyspaces</span><span class="p">;</span>
    
     <span class="n">keyspace_name</span> <span class="o">|</span> <span class="n">storage_options</span>                                <span class="o">|</span> <span class="n">storage_type</span>
    <span class="c1">---------------+------------------------------------------------+--------------</span>
               <span class="n">ksx</span> <span class="o">|</span> <span class="p">{</span><span class="s1">&#39;bucket&#39;</span><span class="p">:</span> <span class="s1">&#39;/tmp/xx&#39;</span><span class="p">,</span> <span class="s1">&#39;endpoint&#39;</span><span class="p">:</span> <span class="s1">&#39;localhost&#39;</span><span class="p">}</span> <span class="o">|</span>           <span class="n">S3</span>
</pre></div>
</div>
</section>
<section id="prune-materialized-view-statements">
<h2>PRUNE MATERIALIZED VIEW statements<a class="headerlink" href="#prune-materialized-view-statements" title="Link to this heading">¶</a></h2>
<p>A special statement is dedicated for pruning ghost rows from materialized views.
Ghost row is an inconsistency issue which manifests itself by having rows
in a materialized view which do not correspond to any base table rows.
Such inconsistencies should be prevented altogether and ScyllaDB is striving to avoid
them, but <em>if</em> they happen, this statement can be used to restore a materialized view
to a fully consistent state without rebuilding it from scratch.</p>
<p>Example usages:</p>
<div class="highlight-cql notranslate"><div class="highlight"><pre><span></span>  <span class="n">PRUNE</span> <span class="k">MATERIALIZED</span> <span class="k">VIEW</span> <span class="n">my_view</span><span class="p">;</span>
  <span class="n">PRUNE</span> <span class="k">MATERIALIZED</span> <span class="k">VIEW</span> <span class="n">my_view</span> <span class="k">WHERE</span> <span class="k">token</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">7</span> <span class="k">AND</span> <span class="k">token</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1535250</span><span class="p">;</span>
  <span class="n">PRUNE</span> <span class="k">MATERIALIZED</span> <span class="k">VIEW</span> <span class="n">my_view</span> <span class="k">WHERE</span> <span class="n">v</span> <span class="o">=</span> <span class="mf">19</span><span class="p">;</span>
</pre></div>
</div>
<p>The statement works by fetching requested rows from a materialized view
and then trying to fetch their corresponding rows from the base table.
If it turns out that the base row does not exist, the row is considered
a ghost row and is thus deleted. The statement implicitly works with
consistency level ALL when fetching from the base table to avoid false
positives. As the example shows, a materialized view can be pruned
in one go, but one can also specify specific primary keys or token ranges,
which is recommended in order to make the operation less heavyweight
and allow for running multiple parallel pruning statements for non-overlapping
token ranges.</p>
</section>
<section id="synchronous-materialized-views">
<h2>Synchronous materialized views<a class="headerlink" href="#synchronous-materialized-views" title="Link to this heading">¶</a></h2>
<p>Usually, when a table with materialized views is updated, the update to the
views happens <em>asynchronously</em>, i.e., in the background. This means that
the user cannot know when the view updates have all finished - or even be
sure that they succeeded.</p>
<p>However, there are circumstances where ScyllaDB does view updates
<em>synchronously</em> - i.e., the user’s write returns only after the views
were updated. This happens when the materialized-view replica is on the
same node as the base-table replica. For example, if the base table and
the view have the same partition key. Note that only ScyllaDB guarantees
synchronous view updates in this case - they are asynchronous in Cassandra.</p>
<p>ScyllaDB also allows explicitly marking a view as synchronous. When a view
is marked synchronous, base-table updates will wait for that view to be
updated before returning. A base table may have multiple views marked
synchronous, and will wait for all of them. The consistency level of a
write applies to synchronous views as well as to the base table: For
example, writing with QUORUM consistency level returns only after a
quorum of the base-table replicas were updated <em>and</em> also a quorum of
each synchronous view table was also updated.</p>
<p>Synchronous views tend to reduce the observed availability of the base table,
because a base-table write would only succeed if enough synchronous view
updates also succeed. On the other hand, failed view updates would be
detected immediately, and appropriate action can be taken, such as retrying
the write or pruning the materialized view (as mentioned in the previous
section). This can improve the consistency of the base table with its views.</p>
<p>To create a new materialized view with synchronous updates, use:</p>
<div class="highlight-cql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">MATERIALIZED</span> <span class="k">VIEW</span> <span class="n">main</span><span class="mf">.</span><span class="n">mv</span>
  <span class="k">AS</span> <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">main</span><span class="mf">.</span><span class="n">t</span>
  <span class="k">WHERE</span> <span class="n">v</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">id</span><span class="p">)</span>
  <span class="k">WITH</span> <span class="n">synchronous_updates</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>
</pre></div>
</div>
<p>To make an existing materialized view synchronous, use:</p>
<div class="highlight-cql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span> <span class="k">MATERIALIZED</span> <span class="k">VIEW</span> <span class="n">main</span><span class="mf">.</span><span class="n">mv</span> <span class="k">WITH</span> <span class="n">synchronous_updates</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>
</pre></div>
</div>
<p>To return a materialized view to the default behavior (which, as explained
above, <em>usually</em> means asynchronous updates), use:</p>
<div class="highlight-cql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span> <span class="k">MATERIALIZED</span> <span class="k">VIEW</span> <span class="n">main</span><span class="mf">.</span><span class="n">mv</span> <span class="k">WITH</span> <span class="n">synchronous_updates</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
</pre></div>
</div>
<section id="synchronous-global-secondary-indexes">
<h3>Synchronous global secondary indexes<a class="headerlink" href="#synchronous-global-secondary-indexes" title="Link to this heading">¶</a></h3>
<p>Synchronous updates can also be turned on for global secondary indexes.
At the time of writing this paragraph there is no direct syntax to do that,
but it’s possible to mark the underlying materialized view of an index
as synchronous. ScyllaDB’s implementation of secondary indexes is based
on materialized views and the generated view’s name can be extracted
from schema tables, and is generally constructed by appending <code class="docutils literal notranslate"><span class="pre">_index</span></code>
suffix to the index name:</p>
<div class="highlight-cql notranslate"><div class="highlight"><pre><span></span><span class="k">create</span> <span class="k">table</span> <span class="n">main</span><span class="mf">.</span><span class="n">t</span><span class="p">(</span><span class="n">id</span> <span class="nb">int</span> <span class="k">primary</span> <span class="k">key</span><span class="p">,</span> <span class="n">v</span> <span class="nb">int</span><span class="p">);</span>
<span class="k">create</span> <span class="k">index</span> <span class="k">on</span> <span class="n">main</span><span class="mf">.</span><span class="n">t</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>

<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">system_schema</span><span class="mf">.</span><span class="n">indexes</span> <span class="p">;</span>

 <span class="n">keyspace_name</span> <span class="o">|</span> <span class="n">table_name</span> <span class="o">|</span> <span class="n">index_name</span> <span class="o">|</span> <span class="n">kind</span>       <span class="o">|</span> <span class="k">options</span>
<span class="c1">---------------+------------+------------+------------+-----------------</span>
          <span class="n">main</span> <span class="o">|</span>          <span class="n">t</span> <span class="o">|</span>    <span class="n">t_v_idx</span> <span class="o">|</span> <span class="n">COMPOSITES</span> <span class="o">|</span> <span class="p">{</span><span class="s1">&#39;target&#39;</span><span class="p">:</span> <span class="s1">&#39;v&#39;</span><span class="p">}</span>

<span class="p">(</span><span class="mf">1</span> <span class="n">rows</span><span class="p">)</span>


<span class="k">select</span> <span class="n">keyspace_name</span><span class="p">,</span> <span class="n">view_name</span> <span class="k">from</span> <span class="n">system_schema</span><span class="mf">.</span><span class="n">views</span> <span class="p">;</span>

 <span class="n">keyspace_name</span> <span class="o">|</span> <span class="n">view_name</span>
<span class="c1">---------------+---------------</span>
          <span class="n">main</span> <span class="o">|</span> <span class="n">t_v_idx_index</span>

<span class="p">(</span><span class="mf">1</span> <span class="n">rows</span><span class="p">)</span>

<span class="k">alter</span> <span class="k">materialized</span> <span class="k">view</span> <span class="n">t_v_idx_index</span> <span class="k">with</span> <span class="n">synchronous_updates</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>
</pre></div>
</div>
<p>Local secondary indexes already have synchronous updates, so there’s no need
to explicitly mark them as such.</p>
</section>
</section>
<section id="expressions">
<h2>Expressions<a class="headerlink" href="#expressions" title="Link to this heading">¶</a></h2>
<section id="null">
<h3>NULL<a class="headerlink" href="#null" title="Link to this heading">¶</a></h3>
<p>Scylla aims for a uniform handling of NULL values in expressions, inspired
by SQL: The overarching principle is that a NULL signifies an <em>unknown value</em>,
so most expressions calculated based on a NULL also results in a NULL.
For example, the results of <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">NULL</span></code>, <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">NULL</span></code> or <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">NULL</span></code> are all NULL,
no matter what <code class="docutils literal notranslate"><span class="pre">x</span></code> is. Even the expression <code class="docutils literal notranslate"><span class="pre">NULL</span> <span class="pre">=</span> <span class="pre">NULL</span></code> evaluates to NULL,
not TRUE.</p>
<p>But not all expressions of NULL evaluate to NULL. An interesting example
is boolean conjunction:<code class="docutils literal notranslate"><span class="pre">FALSE</span> <span class="pre">AND</span> <span class="pre">NULL</span></code> returns FALSE - not NULL. This is
because no matter which unknown value the NULL represents, ANDing it with
FALSE will always result in FALSE. So the return value is not unknown - it
is a FALSE. In contrast, <code class="docutils literal notranslate"><span class="pre">TRUE</span> <span class="pre">AND</span> <span class="pre">NULL</span></code> does return NULL, because if we AND
a TRUE with an unknown value the result is also unknown: <code class="docutils literal notranslate"><span class="pre">TRUE</span> <span class="pre">AND</span> <span class="pre">TRUE</span></code> is
TRUE but <code class="docutils literal notranslate"><span class="pre">TRUE</span> <span class="pre">AND</span> <span class="pre">FALSE</span></code> is FALSE.</p>
<p>Because <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">NULL</span></code> always evaluates to NULL, a <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> filter <code class="docutils literal notranslate"><span class="pre">WHERE</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">NULL</span></code>
matches no row (<em>matching</em> means evaluating to TRUE). It does <strong>not</strong> match
rows where x is missing. If you really want to match rows with missing x,
SQL offers a different syntax <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">IS</span> <span class="pre">NULL</span></code> (and similarly, also <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">IS</span> <span class="pre">NOT</span> <span class="pre">NULL</span></code>), Scylla does not yet implement this syntax.</p>
<p>In contrast, Cassandra is less consistent in its handling of nulls.
The example <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">NULL</span></code> is considered an error, not a valid expression
whose result is NULL.</p>
<p>The rules explained above apply to most expressions, in particular to <code class="docutils literal notranslate"><span class="pre">WHERE</span></code>
filters in <code class="docutils literal notranslate"><span class="pre">SELECT</span></code>. However, the evaluation rules for LWT IF clauses
(<em>conditional updates</em>) are <em>different</em>: a <code class="docutils literal notranslate"><span class="pre">IF</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">NULL</span></code> condition succeeds
if <code class="docutils literal notranslate"><span class="pre">x</span></code> is unset. This non-standard behavior of NULLs in IF expressions may
be made configurable in a future version.</p>
</section>
</section>
<section id="null-is-valid-input-for-lwt-if-clause-element-access">
<h2><code class="docutils literal notranslate"><span class="pre">NULL</span></code> is valid input for LWT IF clause element access<a class="headerlink" href="#null-is-valid-input-for-lwt-if-clause-element-access" title="Link to this heading">¶</a></h2>
<p>The LWT IF clauses</p>
<div class="highlight-cql notranslate"><div class="highlight"><pre><span></span><span class="k">IF</span> <span class="n">some_map</span><span class="p">[:</span><span class="n">var</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-cql notranslate"><div class="highlight"><pre><span></span><span class="k">IF</span> <span class="n">some_map</span><span class="p">[:</span><span class="n">var</span><span class="p">]</span> <span class="o">!=</span> <span class="mf">3</span>
</pre></div>
</div>
<p>is an error if <code class="docutils literal notranslate"><span class="pre">:var</span></code> is <code class="docutils literal notranslate"><span class="pre">NULL</span></code> on Cassandra, but is accepted by
Scylla. The result of the comparison, for both <code class="docutils literal notranslate"><span class="pre">=</span></code> and <code class="docutils literal notranslate"><span class="pre">!=</span></code>, is <code class="docutils literal notranslate"><span class="pre">FALSE</span></code>.</p>
</section>
<section id="null-is-valid-input-for-lwt-if-clause-like-patterns">
<h2><code class="docutils literal notranslate"><span class="pre">NULL</span></code> is valid input for LWT IF clause <code class="docutils literal notranslate"><span class="pre">LIKE</span></code> patterns<a class="headerlink" href="#null-is-valid-input-for-lwt-if-clause-like-patterns" title="Link to this heading">¶</a></h2>
<p>The LWT IF clauses</p>
<div class="highlight-cql notranslate"><div class="highlight"><pre><span></span><span class="k">IF</span> <span class="n">some_column</span> <span class="k">LIKE</span> <span class="p">:</span><span class="n">pattern</span>
</pre></div>
</div>
<p>is an error if <code class="docutils literal notranslate"><span class="pre">:pattern</span></code> is <code class="docutils literal notranslate"><span class="pre">NULL</span></code> on Cassandra, but is accepted by
Scylla. The result of the pattern match is <code class="docutils literal notranslate"><span class="pre">FALSE</span></code>.</p>
</section>
<section id="reducefunc-for-uda">
<h2>REDUCEFUNC for UDA<a class="headerlink" href="#reducefunc-for-uda" title="Link to this heading">¶</a></h2>
<p>REDUCEFUNC extension adds optional reduction function to user-defined aggregate.
This allows to speed up aggregation query execution by distributing the calculations
to other nodes and reducing partial results into final one.
Specification of this function is it has to be scalar function with two arguments,
both of the same type as UDA’s state, also returning the state type.</p>
<div class="highlight-cql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">FUNCTION</span> <span class="n">row_fct</span><span class="p">(</span><span class="n">acc</span> <span class="k">tuple</span><span class="o">&lt;</span><span class="nb">bigint</span><span class="p">,</span> <span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">val</span> <span class="nb">int</span><span class="p">)</span>
<span class="k">RETURNS</span> <span class="k">NULL</span> <span class="k">ON</span> <span class="k">NULL</span> <span class="k">INPUT</span>
<span class="k">RETURNS</span> <span class="k">tuple</span><span class="o">&lt;</span><span class="nb">bigint</span><span class="p">,</span> <span class="nb">int</span><span class="o">&gt;</span>
<span class="k">LANGUAGE</span> <span class="n">lua</span>
<span class="k">AS</span> <span class="s">$$</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">acc</span><span class="o">[</span><span class="mi">1</span><span class="o">]+</span><span class="n">val</span><span class="p">,</span><span class="w"> </span><span class="n">acc</span><span class="o">[</span><span class="mi">2</span><span class="o">]+</span><span class="mi">1</span><span class="w"> </span><span class="p">}</span>
<span class="s">$$</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">FUNCTION</span> <span class="n">reduce_fct</span><span class="p">(</span><span class="n">acc</span> <span class="k">tuple</span><span class="o">&lt;</span><span class="nb">bigint</span><span class="p">,</span> <span class="nb">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">acc2</span> <span class="k">tuple</span><span class="o">&lt;</span><span class="nb">bigint</span><span class="p">,</span> <span class="nb">int</span><span class="o">&gt;</span><span class="p">)</span>
<span class="k">RETURNS</span> <span class="k">NULL</span> <span class="k">ON</span> <span class="k">NULL</span> <span class="k">INPUT</span>
<span class="k">RETURNS</span> <span class="k">tuple</span><span class="o">&lt;</span><span class="nb">bigint</span><span class="p">,</span> <span class="nb">int</span><span class="o">&gt;</span>
<span class="k">LANGUAGE</span> <span class="n">lua</span>
<span class="k">AS</span> <span class="s">$$</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">acc</span><span class="o">[</span><span class="mi">1</span><span class="o">]+</span><span class="n">acc2</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">acc</span><span class="o">[</span><span class="mi">2</span><span class="o">]+</span><span class="n">acc2</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="w"> </span><span class="p">}</span>
<span class="s">$$</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">FUNCTION</span> <span class="n">final_fct</span><span class="p">(</span><span class="n">acc</span> <span class="k">tuple</span><span class="o">&lt;</span><span class="nb">bigint</span><span class="p">,</span> <span class="nb">int</span><span class="o">&gt;</span><span class="p">)</span>
<span class="k">RETURNS</span> <span class="k">NULL</span> <span class="k">ON</span> <span class="k">NULL</span> <span class="k">INPUT</span>
<span class="k">RETURNS</span> <span class="nb">double</span>
<span class="k">LANGUAGE</span> <span class="n">lua</span>
<span class="k">AS</span> <span class="s">$$</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">acc</span><span class="o">[</span><span class="mi">1</span><span class="o">]/</span><span class="n">acc</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span>
<span class="s">$$</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">AGGREGATE</span> <span class="n">custom_avg</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="k">SFUNC</span> <span class="n">row_fct</span>
<span class="k">STYPE</span> <span class="k">tuple</span><span class="o">&lt;</span><span class="nb">bigint</span><span class="p">,</span> <span class="nb">int</span><span class="o">&gt;</span>
<span class="n">REDUCEFUNC</span> <span class="n">reduce_fct</span>
<span class="k">FINALFUNC</span> <span class="n">final_fct</span>
<span class="k">INITCOND</span> <span class="p">(</span><span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">);</span>
</pre></div>
</div>
<section id="lists-elements-for-filtering">
<h3>Lists elements for filtering<a class="headerlink" href="#lists-elements-for-filtering" title="Link to this heading">¶</a></h3>
<p>Subscripting a list in a WHERE clause is supported as are maps.</p>
<div class="highlight-cql notranslate"><div class="highlight"><pre><span></span><span class="k">WHERE</span> <span class="n">some_list</span><span class="p">[:</span><span class="k">index</span><span class="p">]</span> <span class="o">=</span> <span class="p">:</span><span class="n">value</span>
</pre></div>
</div>
</section>
</section>
<section id="per-partition-rate-limit">
<h2>Per-partition rate limit<a class="headerlink" href="#per-partition-rate-limit" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">per_partition_rate_limit</span></code> option can be used to limit the allowed
rate of requests to each partition in a given table. When the cluster detects
that the rate of requests exceeds configured limit, the cluster will start
rejecting some of them in order to bring the throughput back to the configured
limit. Rejected requests are less costly which can help reduce overload.</p>
<p><em>NOTE</em>: Due to ScyllaDB’s distributed nature, tracking per-partition request rates
is not perfect and the actual rate of accepted requests may be higher up to
a factor of keyspace’s <code class="docutils literal notranslate"><span class="pre">RF</span></code>. This feature should not be used to enforce precise
limits but rather serve as an overload protection feature.</p>
<p>_NOTE): This feature works best when shard-aware drivers are used (rejected
requests have the least cost).</p>
<p>Limits are configured separately for reads and writes. Some examples:</p>
<div class="highlight-cql notranslate"><div class="highlight"><pre><span></span>    <span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="k">WITH</span> <span class="n">per_partition_rate_limit</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;max_reads_per_second&#39;</span><span class="p">:</span> <span class="mf">100</span><span class="p">,</span>
        <span class="s1">&#39;max_writes_per_second&#39;</span><span class="p">:</span> <span class="mf">200</span>
    <span class="p">};</span>
</pre></div>
</div>
<p>Limit reads only, no limit for writes:</p>
<div class="highlight-cql notranslate"><div class="highlight"><pre><span></span>    <span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">t</span> <span class="k">WITH</span> <span class="n">per_partition_rate_limit</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;max_reads_per_second&#39;</span><span class="p">:</span> <span class="mf">200</span>
    <span class="p">};</span>
</pre></div>
</div>
<p>Rejected requests receive the scylla-specific “Rate limit exceeded” error.
If the driver doesn’t support it, <code class="docutils literal notranslate"><span class="pre">Config_error</span></code> will be sent instead.</p>
<p>For more details, see:</p>
<ul class="simple">
<li><p>Detailed <a class="reference external" href="https://github.com/scylladb/scylla/blob/master/docs/dev/per-partition-rate-limit.md">design notes</a></p></li>
<li><p>Description of the <a class="reference external" href="https://github.com/scylladb/scylla/blob/master/docs/dev/protocol-extensions.md#rate-limit-error">rate limit exceeded</a> error</p></li>
</ul>
</section>
</section>

                    </div>
                    
                        <div class="post-content">
                            
    <div class="feedback-container">
        <p class="feedback-container__title">Was this page helpful?</p>
        <span data-tooltip tabindex="1" title="Yes" data-position="top">
            <button class="feedback-container__button" id="feedback-positive">
                <i class="feedback-container__icon icon-docs-thumbs-up"></i>
            </button>
        </span>
        <span data-tooltip tabindex="1" title="No" data-position="top">
            <button class="feedback-container__button" id="feedback-negative">
                <i class="feedback-container__icon icon-docs-thumbs-down"></i>
            </button>
        </span>
        <div class="feedback-container__message" id="feedback-message"></div>
    </div>

    <script>
        function resetFeedbackButtonActive() {
            const feedbackButtons = document.getElementsByClassName('feedback-container__button');
            for (let i = 0; i < feedbackButtons.length; i++) {
                feedbackButtons[i].classList.remove('active');
            }
        }

        function showMessage(liked) {
            const feedbackMessage = document.getElementById('feedback-message');
            const themeGithubRepository = true;
            let message = 'Great! Thanks for your feedback.';
            if (themeGithubRepository && !liked) {
                message = "Thanks for your feedback! Please don't hesitate to <a href='https://github.com/scylladb/scylladb/issues/new?title=docs:%20Issue on page ScyllaDB CQL Extensions&&body=I%20would%20like%20to%20report%20an%20issue%20on%20page%20https://opensource.docs.scylladb.com/branch-5.4/cql/cql-extensions%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix&labels=documentation'>create an issue</a> if you have any suggestions on how we can improve.";
            }
            feedbackMessage.innerHTML = message;
        }

        function sendGaEvent(liked) {
            const event_label = liked ? "positive" : "negative";
            const event = "feedback_" + event_label;
            window.dataLayer = window.dataLayer || [];
            window.dataLayer.push({
                'event': event,
            });
        }

        const positiveFeebackButton = document.getElementById('feedback-positive');
        const negativeFeedbackButton = document.getElementById('feedback-negative');

        positiveFeebackButton.addEventListener('click', function() {
            resetFeedbackButtonActive();
            sendGaEvent(true);
            showMessage(true);
            positiveFeebackButton.classList.add('active');
        });

        negativeFeedbackButton.addEventListener('click', function() {
            resetFeedbackButtonActive();
            sendGaEvent(false);
            showMessage(false);
            negativeFeedbackButton.classList.add('active');
        });
    </script>

                            <div class="content-navigation">
    <div class="navigation navigation--prev">
        
            <a class="navigation__link" href="reserved-keywords.html">
                <button class="navigation__button">
                    <i class="icon-chevron-left"></i>
                </button>
                <div class="navigation__title">
                    <span class="colored">PREVIOUS</span> <br />Reserved CQL Keywords
                </div>
            </a>
        
    </div>
    <div class="navigation navigation--next">
        
            <a class="navigation__link" href="../architecture/index.html">
                <div class="navigation__title">
                    <span class="colored">NEXT</span> <br />ScyllaDB Architecture
                </div>
                <button class="navigation__button">
                    <i class="icon-chevron-right"></i>
                </button>
            </a>
        
    </div>
</div>
                            <!-- Post content text -->
                        </div>
                    
                
                
                    </div>
                        <div class="sidebar-right large-order-3">
                            <div class="secondary-side-nav custom-scroll-bar">
    
    <ul class="contribute">
        <li class="contribute__item">
            <a class="button button-sm" href="https://github.com/scylladb/scylladb/issues/new?title=docs:%20Issue on page ScyllaDB CQL Extensions&&body=I%20would%20like%20to%20report%20an%20issue%20on%20page%20https://opensource.docs.scylladb.com/branch-5.4/cql/cql-extensions%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix&labels=documentation"
               target="_blank">
                <i class="icon-github" aria-hidden="true"></i>Create an issue
            </a>
        </li>
        
            <li class="contribute__item">
                <a class="button button-sm" href="https://github.com/scylladb/scylladb/edit/master/docs/cql/cql-extensions.md"
                   target="_blank">
                    <i class="icon-edit" aria-hidden="true"></i>Edit this page
                </a>
            </li>
        
    </ul>

    
        <div class="secondary-side-nav__content">
            <p class="topic-title">On this page</p>
            <ul>
<li><a class="reference internal" href="#">ScyllaDB CQL Extensions</a><ul>
<li><a class="reference internal" href="#bypass-cache-clause">BYPASS CACHE clause</a></li>
<li><a class="reference internal" href="#paxos-grace-seconds-per-table-option">“Paxos grace seconds” per-table option</a></li>
<li><a class="reference internal" href="#using-timeout">USING TIMEOUT</a></li>
<li><a class="reference internal" href="#keyspace-storage-options">Keyspace storage options</a></li>
<li><a class="reference internal" href="#prune-materialized-view-statements">PRUNE MATERIALIZED VIEW statements</a></li>
<li><a class="reference internal" href="#synchronous-materialized-views">Synchronous materialized views</a><ul>
<li><a class="reference internal" href="#synchronous-global-secondary-indexes">Synchronous global secondary indexes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#expressions">Expressions</a><ul>
<li><a class="reference internal" href="#null">NULL</a></li>
</ul>
</li>
<li><a class="reference internal" href="#null-is-valid-input-for-lwt-if-clause-element-access"><code class="docutils literal notranslate"><span class="pre">NULL</span></code> is valid input for LWT IF clause element access</a></li>
<li><a class="reference internal" href="#null-is-valid-input-for-lwt-if-clause-like-patterns"><code class="docutils literal notranslate"><span class="pre">NULL</span></code> is valid input for LWT IF clause <code class="docutils literal notranslate"><span class="pre">LIKE</span></code> patterns</a></li>
<li><a class="reference internal" href="#reducefunc-for-uda">REDUCEFUNC for UDA</a><ul>
<li><a class="reference internal" href="#lists-elements-for-filtering">Lists elements for filtering</a></li>
</ul>
</li>
<li><a class="reference internal" href="#per-partition-rate-limit">Per-partition rate limit</a></li>
</ul>
</li>
</ul>

        </div>
    
</div>
                        </div>
                    </div>
                
            </div>
            <div class="sidebar-left  large-order-1">
                
                    
                        <div id="side-nav" class="side-nav custom-scroll-bar" data-closable data-toggler=".show">
    <button class="collapsible-button">
        <i class="icon-docs-menu-collapse"></i>
    </button>
    <div class="side-nav-content custom-scroll-bar">
        <div class="side-nav__title">
            <a href="../index.html">ScyllaDB Open Source</a>
        </div>
        <div class="side-nav__search">
            <div class="search-box">
                <ci-search></ci-search>
            </div>
        </div>
        <div class="side-nav__versions"><ul class="dropdown menu scylla-dropdown scylla-dropdown--versions" data-dropdown-menu>
    <li class="scylla-dropdown__item">
        <a class="scylla-dropdown__title" href="#">
            
                5.4
            
            <i class="chevron icon-docs-chevron-right"></i>
        </a>
        <ul class="menu scylla-dropdown__content">
            
                
                    <li>
                        <a href="../../stable/index.html">6.2</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../branch-6.1/index.html">6.1</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../branch-6.0/index.html">6.0</a>
                    </li>
                
            
                
                    <li>
                        <a href="cql-extensions.html">5.4</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../branch-5.2/cql/cql-extensions.html">5.2</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../branch-5.1/cql/cql-extensions.html">5.1</a>
                    </li>
                
            
            
        </ul>
    </li>
</ul></div>
        <div class="side-nav__content">
            <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../getting-started/index.html">Getting Started</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../getting-started/install-scylla/index.html">Install ScyllaDB</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/install-scylla/launch-on-aws.html">Launch ScyllaDB on AWS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/install-scylla/launch-on-gcp.html">Launch ScyllaDB on GCP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/install-scylla/launch-on-azure.html">Launch ScyllaDB on Azure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/installation-common/scylla-web-installer.html">ScyllaDB Web Installer for Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/install-scylla/install-on-linux.html">Install ScyllaDB Linux Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/installation-common/unified-installer.html">Install ScyllaDB Without root Privileges</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/installation-common/air-gapped-install.html">Air-gapped Server Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/installation-common/disable-housekeeping.html">ScyllaDB Housekeeping and how to disable it</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/installation-common/dev-mod.html">ScyllaDB Developer Mode</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/configure.html">Configure ScyllaDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/config-commands.html">ScyllaDB Configuration Reference</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../getting-started/requirements.html">ScyllaDB Requirements</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/system-requirements.html">System Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/os-support.html">OS Support by Linux Distributions and Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/cloud-instance-recommendations.html">Cloud Instance Recommendations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/scylla-in-a-shared-environment.html">ScyllaDB in a Shared Environment</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../using-scylla/migrate-scylla.html">Migrate to ScyllaDB</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/procedures/cassandra-to-scylla-migration-process.html">Migration Process from Cassandra to Scylla</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using-scylla/cassandra-compatibility.html">Scylla and Apache Cassandra Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using-scylla/mig-tool-review.html">Migration Tools Overview</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../using-scylla/integrations/index.html">Integration Solutions</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../using-scylla/integrations/integration-spark.html">Integrate Scylla with Spark</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using-scylla/integrations/integration-kairos.html">Integrate Scylla with KairosDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using-scylla/integrations/integration-presto.html">Integrate ScyllaDB with Presto</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using-scylla/integrations/integration-elasticsearch.html">Integrate Scylla with Elasticsearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using-scylla/integrations/integration-k8.html">Integrate Scylla with Kubernetes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using-scylla/integrations/integration-janus.html">Integrate Scylla with the JanusGraph Graph Data System</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using-scylla/integrations/integration-datadog.html">Integrate Scylla with DataDog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using-scylla/integrations/integration-kafka.html">Integrate Scylla with Kafka</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using-scylla/integrations/integration-iota.html">Integrate Scylla with IOTA Chronicle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using-scylla/integrations/integration-spring.html">Integrate Scylla with Spring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using-scylla/integrations/sink-kafka-connector.html">Shard-Aware Kafka Connector for Scylla</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using-scylla/integrations/integration-ansible.html">Install Scylla with Ansible</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using-scylla/integrations/integration-databricks.html">Integrate Scylla with Databricks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using-scylla/integrations/integration-jaeger.html">Integrate Scylla with Jaeger Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using-scylla/integrations/integration-mindsdb.html">Integrate Scylla with MindsDB</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/tutorials.html">Tutorials</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../operating-scylla/index.html">ScyllaDB for Administrators</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../operating-scylla/admin.html">Administration Guide</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../operating-scylla/procedures/index.html">Procedures</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label for="toctree-checkbox-7"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/procedures/cluster-management/index.html">Cluster Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/procedures/backup-restore/index.html">Backup &amp; Restore</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/procedures/config-change/index.html">Change Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/procedures/maintenance/index.html">Maintenance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/procedures/tips/index.html">Best Practices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/benchmarking-scylla.html">Benchmarking Scylla</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/procedures/cassandra-to-scylla-migration-process.html">Migrate from Cassandra to Scylla</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/installation-common/disable-housekeeping.html">Disable Housekeeping</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../operating-scylla/security/index.html">Security</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label for="toctree-checkbox-8"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/security/security-checklist.html">ScyllaDB Security Checklist</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/security/authentication.html">Enable Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/security/runtime-authentication.html">Enable and Disable Authentication Without Downtime</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/security/create-superuser.html">Creating a Custom Superuser</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/security/gen-cqlsh-file.html">Generate a cqlshrc File</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/password-reset.html">Reset Authenticator Password</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/security/enable-authorization.html">Enable Authorization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/security/authorization.html">Grant Authorization CQL Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/security/certificate-authentication.html">Certificate-based Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/security/rbac-usecase.html">Role Based Access Control (RBAC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/security/client-node-encryption.html">Encryption: Data in Transit Client to Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/security/node-node-encryption.html">Encryption: Data in Transit Node to Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/security/generate-certificate.html">Generating a self-signed Certificate Chain Using openssl</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/security/saslauthd.html">Configure SaslauthdAuthenticator</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../operating-scylla/admin-tools/index.html">Admin Tools</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label for="toctree-checkbox-9"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/nodetool.html">Nodetool Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="cqlsh.html">CQLSh</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/rest.html">REST</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using-scylla/tracing.html">Tracing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/admin-tools/scylla-sstable.html">Scylla SStable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/admin-tools/scylla-types.html">Scylla Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/admin-tools/sstableloader.html">SSTableLoader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/admin-tools/cassandra-stress.html">cassandra-stress</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/admin-tools/sstabledump.html">SSTabledump</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/admin-tools/sstable2json.html">SSTable2json</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/admin-tools/sstablemetadata.html">SSTableMetadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/logging.html">Scylla Logs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/admin-tools/perftune.html">Seastar Perftune</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/admin-tools/virtual-tables.html">Virtual Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/admin-tools/select-from-mutation-fragments.html">SELECT * FROM MUTATION_FRAGMENTS() Statement</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference external" href="https://monitoring.docs.scylladb.com/">ScyllaDB Monitoring Stack</a></li>
<li class="toctree-l2"><a class="reference external" href="https://operator.docs.scylladb.com/">ScyllaDB Operator</a></li>
<li class="toctree-l2"><a class="reference external" href="https://manager.docs.scylladb.com/">ScyllaDB Manager</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../upgrade/index.html">Upgrade Procedures</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label for="toctree-checkbox-10"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/scylladb-versioning.html">ScyllaDB Versioning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/upgrade-opensource/index.html">ScyllaDB Open Source Upgrade</a></li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/upgrade-to-enterprise/index.html">ScyllaDB Open Source to ScyllaDB Enterprise Upgrade</a></li>
<li class="toctree-l3"><a class="reference internal" href="../upgrade/ami-upgrade.html">ScyllaDB Image</a></li>
<li class="toctree-l3"><a class="reference external" href="https://enterprise.docs.scylladb.com/stable/upgrade/upgrade-enterprise/index.html">ScyllaDB Enterprise</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../operating-scylla/system-configuration/index.html">System Configuration</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label for="toctree-checkbox-11"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/system-configuration.html">System Configuration Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/admin.html">scylla.yaml</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/system-configuration/snitch.html">ScyllaDB Snitches</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../operating-scylla/benchmarking-scylla.html">Benchmarking ScyllaDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operating-scylla/diagnostics.html">ScyllaDB Diagnostic Tools</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../using-scylla/index.html">ScyllaDB for Developers</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label for="toctree-checkbox-12"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../using-scylla/learn.html">Learn To Use ScyllaDB</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label for="toctree-checkbox-13"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference external" href="https://university.scylladb.com/">ScyllaDB University</a></li>
<li class="toctree-l3"><a class="reference external" href="https://university.scylladb.com/available-courses/">Course catalog</a></li>
<li class="toctree-l3"><a class="reference external" href="https://university.scylladb.com/courses/scylla-essentials-overview/">ScyllaDB Essentials</a></li>
<li class="toctree-l3"><a class="reference external" href="https://university.scylladb.com/courses/data-modeling/lessons/basic-data-modeling-2/">Basic Data Modeling</a></li>
<li class="toctree-l3"><a class="reference external" href="https://university.scylladb.com/courses/data-modeling/lessons/advanced-data-modeling/">Advanced Data Modeling</a></li>
<li class="toctree-l3"><a class="reference external" href="https://university.scylladb.com/courses/the-mutant-monitoring-system-training-course/">MMS - Learn by Example</a></li>
<li class="toctree-l3"><a class="reference external" href="https://iot.scylladb.com/">Care-Pet an IoT Use Case and Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../using-scylla/alternator/index.html">Scylla Alternator</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../using-scylla/features.html">Scylla Features</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label for="toctree-checkbox-14"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../using-scylla/features-open-source.html">Scylla Open Source Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using-scylla/features-ent.html">Scylla Enterprise Features</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../using-scylla/drivers/index.html">Scylla Drivers</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label for="toctree-checkbox-15"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../using-scylla/drivers/cql-drivers/index.html">Scylla CQL Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using-scylla/drivers/dynamo-drivers/index.html">Scylla DynamoDB Drivers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../using-scylla/workload-attributes.html">Workload Attributes</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">CQL Reference</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label for="toctree-checkbox-16"><i class="icon-chevron-right"></i></label><div class="break"></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cqlsh.html">CQLSh: the CQL shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendices.html">Appendices</a></li>
<li class="toctree-l2"><a class="reference internal" href="compaction.html">Compaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="consistency.html">Consistency Levels</a></li>
<li class="toctree-l2"><a class="reference internal" href="consistency-calculator.html">Consistency Level Calculator</a></li>
<li class="toctree-l2"><a class="reference internal" href="ddl.html">Data Definition</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="dml.html">Data Manipulation</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/><label for="toctree-checkbox-17"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="dml/select.html">SELECT</a></li>
<li class="toctree-l3"><a class="reference internal" href="dml/insert.html">INSERT</a></li>
<li class="toctree-l3"><a class="reference internal" href="dml/update.html">UPDATE</a></li>
<li class="toctree-l3"><a class="reference internal" href="dml/delete.html">DELETE</a></li>
<li class="toctree-l3"><a class="reference internal" href="dml/batch.html">BATCH</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="types.html">Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="definitions.html">Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="secondary-indexes.html">Global Secondary Indexes</a></li>
<li class="toctree-l2"><a class="reference internal" href="time-to-live.html">Expiring Data with Time to Live (TTL)</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="wasm.html">Wasm support for user-defined functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="json.html">JSON Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="mv.html">Materialized Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="non-reserved-keywords.html">Non-Reserved CQL Keywords</a></li>
<li class="toctree-l2"><a class="reference internal" href="reserved-keywords.html">Reserved CQL Keywords</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">ScyllaDB CQL Extensions</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../architecture/index.html">ScyllaDB Architecture</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/><label for="toctree-checkbox-18"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../architecture/ringarchitecture/index.html">ScyllaDB Ring Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture/architecture-fault-tolerance.html">ScyllaDB Fault Tolerance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture/console-CL-full-demo.html">Consistency Level Console Demo</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../architecture/anti-entropy/index.html">ScyllaDB Anti-Entropy</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/><label for="toctree-checkbox-19"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../architecture/anti-entropy/hinted-handoff.html">Scylla Hinted Handoff</a></li>
<li class="toctree-l3"><a class="reference internal" href="../architecture/anti-entropy/read-repair.html">Scylla Read Repair</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operating-scylla/procedures/maintenance/repair.html">Scylla Repair</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../architecture/sstable/index.html">SSTable</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/><label for="toctree-checkbox-20"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../architecture/sstable/sstable2/index.html">ScyllaDB SSTable - 2.x</a></li>
<li class="toctree-l3"><a class="reference internal" href="../architecture/sstable/sstable3/index.html">ScyllaDB SSTable - 3.x</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../architecture/compaction/compaction-strategies.html">Compaction Strategies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture/raft.html">Raft Consensus Algorithm in ScyllaDB</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../troubleshooting/index.html">Troubleshooting ScyllaDB</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/><label for="toctree-checkbox-21"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../troubleshooting/support/index.html">Errors and Support</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/><label for="toctree-checkbox-22"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/report-scylla-problem.html">Report a Scylla problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/error-messages/index.html">Error Messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/log-level.html">Change Log Level</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../troubleshooting/startup/index.html">ScyllaDB Startup</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/><label for="toctree-checkbox-23"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/change-ownership.html">Ownership Problems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/scylla-wont-start.html">Scylla will not Start</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/python-error-no-module-named-yaml.html">Scylla Python Script broken</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../troubleshooting/upgrade/index.html">Upgrade</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" type="checkbox"/><label for="toctree-checkbox-24"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/missing-dotmount-files.html">Inaccessible configuration files after ScyllaDB upgrade</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../troubleshooting/cluster/index.html">Cluster and Node</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" type="checkbox"/><label for="toctree-checkbox-25"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/failed-decommission.html">Failed Decommission Problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/timeouts.html">Cluster Timeouts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/node-joined-without-any-data.html">Node Joined With No Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/nodetool-memory-read-timeout.html">SocketTimeoutException</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/nodetool-nullpointerexception.html">NullPointerException</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/failed-schema-sync.html">Failed Schema Sync</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../troubleshooting/modeling/index.html">Data Modeling</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" type="checkbox"/><label for="toctree-checkbox-26"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/large-partition-table.html">Scylla Large Partitions Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/large-rows-large-cells-tables.html">Scylla Large Rows and Cells Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/debugging-large-partition.html">Large Partitions Hunting</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../troubleshooting/storage/index.html">Data Storage and SSTables</a><input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" type="checkbox"/><label for="toctree-checkbox-27"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/space-up.html">Space Utilization Increasing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/drop-table-space-up.html">Disk Space is not Reclaimed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/sstable-corruption.html">SSTable Corruption Problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/pointless-compactions.html">Pointless Compactions</a></li>
<li class="toctree-l3"><a class="reference external" href="https://monitoring.docs.scylladb.com/stable/use-monitoring/advisor/heavyCompaction.html">Limiting Compaction</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../troubleshooting/CQL/index.html">CQL</a><input class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" type="checkbox"/><label for="toctree-checkbox-28"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/time-zone.html">Time Range Query Fails</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/copy-from-failed.html">COPY FROM Fails</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/clients-table.html">CQL Connection Table</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../troubleshooting/monitor/index.html">ScyllaDB Monitor and Manager</a><input class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" type="checkbox"/><label for="toctree-checkbox-29"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/manager-monitoring-integration.html">Manager and Monitoring integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting/reverse-dns-sshd.html">Manager lists healthy nodes as down</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../kb/index.html">Knowledge Base</a><input class="toctree-checkbox" id="toctree-checkbox-30" name="toctree-checkbox-30" type="checkbox"/><label for="toctree-checkbox-30"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../kb/cdc-experimental-upgrade.html">Upgrading from experimental CDC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/compaction.html">Compaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/consistency.html">Consistency in ScyllaDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/count-all-rows.html">Counting all rows in a table is slow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/cqlsh-more.html">CQL Query Does Not Display Entire Result Set</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/cqlsh-results.html">When CQLSh query returns partial results with followed by “More”</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/custom-user.html">Run Scylla and supporting services as a custom user:group</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/customizing-cpuset.html">Customizing CPUSET</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/decode-stack-trace.html">Decoding Stack Traces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/disk-utilization.html">Snapshots and Disk Utilization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/dpdk-hardware.html">DPDK mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/flamegraph.html">Debug your database with Flame Graphs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/gc-grace-seconds.html">How to Change gc_grace_seconds for a Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/gossip.html">Gossip in Scylla</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/increase-permission-cache.html">Increase Permission Cache to Avoid Non-paged Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/lwt-differences.html">How does Scylla LWT Differ from Apache Cassandra ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/map-cpu.html">Map CPUs to Scylla Shards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/memory-usage.html">Scylla Memory Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/ntp.html">NTP Configuration for Scylla</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/perftune-modes-sync.html">Updating the Mode in perftune.yaml After a ScyllaDB Upgrade</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/posix.html">POSIX networking for Scylla</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/quiz-administrators.html">Scylla consistency quiz for administrators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/raid-device.html">Recreate RAID devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/rf-increase.html">How to Safely Increase the Replication Factor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/scylla-and-spark-integration.html">Scylla and Spark integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/scylla-limits-systemd.html">Increase Scylla resource limits over systemd</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/seed-nodes.html">Scylla Seed Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/set-up-swap.html">How to Set up a Swap Space</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/snapshots.html">Scylla Snapshots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/static-columns.html">Scylla payload sent duplicated static columns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/stop-local-repair.html">Stopping a local repair</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/system-limits.html">System Limits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/tombstones-flush.html">How to flush old tombstones from a table</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/ttl-facts.html">Time to Live (TTL) and Compaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/unresponsive-nodes.html">Scylla Nodes are Unresponsive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/update-pk.html">Update a Primary Key</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/use-perf.html">Using the perf utility with Scylla</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kb/yaml-address.html">Configure Scylla Networking with Multiple NIC/IP Combinations</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference/index.html">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-31" name="toctree-checkbox-31" type="checkbox"/><label for="toctree-checkbox-31"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/aws-images.html">AWS Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/configuration-parameters.html">Configuration Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/versions-matrix-enterprise-oss.html">ScyllaDB Enterprise vs. Open Source Matrix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">ScyllaDB FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contribute to ScyllaDB</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../alternator/alternator.html">Alternator: DynamoDB API in Scylla</a><input class="toctree-checkbox" id="toctree-checkbox-32" name="toctree-checkbox-32" type="checkbox"/><label for="toctree-checkbox-32"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../alternator/getting-started.html">Getting Started With ScyllaDB Alternator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../alternator/compatibility.html">ScyllaDB Alternator for DynamoDB users</a></li>
</ul>
</li>
</ul>

        </div>
    </div>
</div>
                    
                
            </div>
            
        </section>

        <footer class="footer">
    <div class="footer-group">
        <div class="footer-top">
            <a class="footer-logo" href="https://www.scylladb.com"></a>
            <div class="footer-links">
                <a class="footer-links__link" href="https://docs.scylladb.com/" target="_blank">Docs</a>
                <a class="footer-links__link" href="https://docs.scylladb.com/stable/get-started/develop-with-scylladb/tutorials-example-projects.html" target="_blank">Tutorials</a>
                <a class="footer-links__link" href="https://university.scylladb.com/" target="_blank">University</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/contact-us/"
                    target="_blank">Contact Us</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/" target="_blank">About Us</a>
            </div>
            <div class="footer-actions">
                <a class="footer-actions__link" href="http://slack.scylladb.com/" target="_blank">
                    <span data-tooltip tabindex="1" title="User Slack channel" data-position="bottom">
                        <i class="icon-slack"></i>
                    </span>
                </a>
                <a class="footer-actions__link" href="https://forum.scylladb.com/" target="_blank">
                    <span data-tooltip tabindex="1" title="Community forum" data-position="bottom">
                        <i class="icon-docs-community"></i>
                    </span>
                </a>
            </div>
        </div>

        
        <div class="footer-copyright">
            
                
                    &#169; 2025, ScyllaDB. All rights reserved.
                
                | <a class="footer-copyright__link" href="https://www.scylladb.com/tos/" target="_blank">Terms of Service</a>
                | <a class="footer-copyright__link" href="https://www.scylladb.com/privacy/" target="_blank">Privacy Policy</a>
                | ScyllaDB, and ScyllaDB Cloud, are registered trademarks of ScyllaDB, Inc.
            
        </div>
    


        <div class="footer-bottom">
            
                <div class="footer-bottom__last-updated">
                    
                        Last updated on 25 Oct 2025.
                    
                </div>
            
            <div class="footer-bottom__version">
                Powered by
                <a class="footer-bottom__link" href="http://sphinx-doc.org/">Sphinx 7.4.7</a> &amp;
                <a class="footer-bottom__link" href="https://sphinx-theme.scylladb.com/">ScyllaDB Theme 1.8.8</a>
            </div>
        </div>
    </div>
    
        <biel-button class="footer-ask-ai" project="ddfdo8m94k" 
            header-title="ScyllaDB chatbot (beta)"
            button-position="bottom-right"
            modal-position="bottom-right"
            button-style="dark">
            Ask AI
        </biel-button>
    
</footer>

        <noscript>
            <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T8P2JP" height="0" width="0"
                    style="display: none; visibility: hidden"></iframe>
        </noscript>
    </body>

</html>
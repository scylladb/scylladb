add_library(test-lib STATIC)
target_sources(test-lib
  PRIVATE
    cql_assertions.cc
    dummy_sharder.cc
    exception_utils.cc
    log.cc
    test_utils.cc
    tmpdir.cc
    alternator_test_env.cc
    cql_test_env.cc
    expr_test_utils.cc
    test_services.cc
    key_utils.cc
    mutation_assertions.cc
    mutation_source_test.cc
    random_schema.cc
    result_set_assertions.cc
    sstable_run_based_compaction_strategy_for_tests.cc
    sstable_utils.cc
    data_model.cc
    eventually.cc)
target_include_directories(test-lib
  PUBLIC
    ${CMAKE_SOURCE_DIR})
target_link_libraries(test-lib
  PUBLIC
    scylla-main
    replica
    Seastar::seastar
    xxHash::xxhash
  PRIVATE
    audit
    auth
    cdc
    compaction
    dht   # used by cql3
    gms
    types
    idl
    index # used by cql3
    locator
    message
    schema
    scylla_version
    service
    sstables
    utils
    Boost::regex
    Boost::unit_test_framework)
